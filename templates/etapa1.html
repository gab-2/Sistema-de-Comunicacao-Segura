<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Sistema de Comunicação Segura - Etapa 1</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <button class="sidebar-toggle" id="sidebar-toggle"><i class="fas fa-bars"></i></button>
            <h2>Etapas</h2>
            <ul id="sidebar-steps">
                <li data-step="1" class="active"><span class="step-circle">1</span> Geração de Chaves</li>
                <li data-step="2"><span class="step-circle">2</span> Preparação</li>
                <li data-step="3"><span class="step-circle">3</span> Assinatura</li>
                <li data-step="4"><span class="step-circle">4</span> Proteção</li>
                <li data-step="5"><span class="step-circle">5</span> Envio</li>
                <li data-step="6"><span class="step-circle">6</span> Descriptografia</li>
            </ul>
        </nav>

        <!-- Conteúdo -->
        <main class="content">
            <h1>Etapa 1: Geração de Chaves</h1>
            <p class="description">
                Bem-vindo! Vamos iniciar o processo de comunicação segura. Nesta etapa, você gerará um par de chaves RSA (pública e privada) e uma chave simétrica AES.  
                A chave pública RSA será compartilhada com o destinatário, enquanto a chave privada RSA e a chave AES permanecerão protegidas localmente.
            </p>

            <div class="buttons" style="margin-bottom: 20px;">
                <button id="generate-rsa" class="btn primary">
                    <i class="fas fa-key"></i> Gerar Par de Chaves RSA
                </button>
            </div>
            
            <div id="rsa-success" class="card success" style="display: none;">
                <i class="fas fa-check-circle"></i> Chaves RSA geradas com sucesso!
            </div>
            
            <div id="rsa-output" style="display: none; margin-bottom: 20px;">
                <div style="margin-bottom: 15px;">
                    <label for="public-key">Chave Pública:</label>
                    <textarea id="public-key" class="key-display" readonly></textarea>
                    <div style="display: flex; gap: 10px;">
                        <button class="download-btn" id="download-public">
                            <i class="fas fa-download"></i> Baixar
                        </button>
                        <button class="copy-btn" id="copy-public">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="private-key">Chave Privada:</label>
                    <textarea id="private-key" class="key-display" readonly></textarea>
                    <div style="display: flex; gap: 10px;">
                        <button class="download-btn" id="download-private">
                            <i class="fas fa-download"></i> Baixar
                        </button>
                        <button class="copy-btn" id="copy-private">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                    </div>
                </div>
            </div>

            <div class="buttons" style="margin-bottom: 20px;">
                <button id="generate-aes" class="btn secondary">
                    <i class="fas fa-lock"></i> Gerar Chave AES
                </button>
            </div>
            
            <div id="aes-success" class="card success" style="display: none;">
                <i class="fas fa-check-circle"></i> Chave AES gerada com sucesso!
            </div>
            
            <div id="aes-output" style="display: none;">
                <label for="aes-key">Chave AES:</label>
                <textarea id="aes-key" class="key-display" readonly></textarea>
                <div style="display: flex; gap: 10px;">
                    <button class="download-btn" id="download-aes">
                        <i class="fas fa-download"></i> Baixar
                    </button>
                    <button class="copy-btn" id="copy-aes">
                        <i class="fas fa-copy"></i> Copiar
                    </button>
                </div>
            </div>

            <hr class="divider">

            <p style="margin-bottom: 20px; font-size: 14px; color: #555;">
                Após gerar as chaves, clique em "Próximo" para continuar o processo.
            </p>
            <button id="next-button" class="btn primary" disabled>
                Próximo →
            </button>
        </main>
    </div>
    <script>
        // Lógica JS adicional para copiar as chaves

        // Função para copiar texto da textarea
        function copyToClipboard(elementId) {
            const textarea = document.getElementById(elementId);
            if (textarea) {
                navigator.clipboard.writeText(textarea.value).then(() => {
                    alert("Texto copiado para a área de transferência!");
                }, () => {
                    alert("Não foi possível copiar o texto.");
                });
            }
        }

        // Event listeners para os botões de copiar
        const copyPublicBtn = document.getElementById("copy-public");
        if (copyPublicBtn) {
            copyPublicBtn.addEventListener("click", () => copyToClipboard("public-key"));
        }

        const copyPrivateBtn = document.getElementById("copy-private");
        if (copyPrivateBtn) {
            copyPrivateBtn.addEventListener("click", () => copyToClipboard("private-key"));
        }

        const copyAesBtn = document.getElementById("copy-aes");
        if (copyAesBtn) {
            copyAesBtn.addEventListener("click", () => copyToClipboard("aes-key"));
        }
    </script>
    <script src="/static/js/etapa1.js"></script>
</body>
</html>
